(this["webpackJsonpfav-location-tracker"]=this["webpackJsonpfav-location-tracker"]||[]).push([[0],{118:function(e,t,a){e.exports=a(180)},123:function(e,t,a){},124:function(e,t,a){},180:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(11),l=a.n(i),r=(a(123),a(124),a(104)),c=a(12),s=a(8),m=a(16),u=a(13),d=a(25),p=a(24),h=a(214),g=a(227),f=a(187),v=a(212),E=a(217),b=a(216),y=a(215),w=a(218),k=a(35),S=a.n(k),C=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(s.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.setState({loading:!0});var t={email:n.state.email,password:n.state.password};k.auth().signInWithEmailAndPassword(t.email,t.password).then((function(e){e.user&&(alert("User Logged in Successfully"),localStorage.setItem("loggedIn",!0),localStorage.setItem("uid",e.user.uid),n.props.history.push("/"),n.clearState())})).catch((function(e){var t=e.message?e.message:"Email Id or password Incorrect";alert(t),n.clearState()}))},n.state={email:"",password:"",loading:!1},n}return Object(u.a)(a,[{key:"clearState",value:function(){this.setState({email:"",password:"",loading:!1})}},{key:"render",value:function(){var e=this.state.loading;return o.a.createElement("div",{className:"loginForm"},o.a.createElement(v.a,{component:"main",maxWidth:"xs"},o.a.createElement(h.a,null),o.a.createElement("div",null,o.a.createElement(f.a,{component:"h1",variant:"h5"},"Login"),o.a.createElement("form",{noValidate:!0},o.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,helperText:"Enter a valid email",onChange:this.handleChange}),o.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.handleChange}),o.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:this.handleSubmit,disabled:e||!this.state.email||!this.state.password},"Sign In",e&&o.a.createElement(b.a,{size:30})),o.a.createElement(E.a,{container:!0},o.a.createElement(E.a,{item:!0},o.a.createElement(w.a,{href:"signup",variant:"body2"},"Don't have an account? Sign Up")))))))}}]),a}(n.Component),O=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(s.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.setState({loading:!0});var t={email:n.state.email,password:n.state.password};k.auth().createUserWithEmailAndPassword(t.email,t.password).then((function(e){e.user&&(alert("User Created"),n.clearState())})).catch((function(e){var t=e.message?e.message:"Some Error Occured. Please Try Again";alert(t),n.clearState()}))},n.state={email:"",password:"",loading:!1},n}return Object(u.a)(a,[{key:"clearState",value:function(){this.setState({email:"",password:"",loading:!1})}},{key:"render",value:function(){var e=this.state.loading;return o.a.createElement("div",{className:"loginForm"},o.a.createElement(v.a,{component:"main",maxWidth:"xs"},o.a.createElement(h.a,null),o.a.createElement("div",null,o.a.createElement(f.a,{component:"h1",variant:"h5"},"SignUp"),o.a.createElement("form",{noValidate:!0},o.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:this.state.email,onChange:this.handleChange}),o.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:this.state.password,autoComplete:"current-password",onChange:this.handleChange}),o.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:this.handleSubmit,disabled:e||!this.state.email||!this.state.password},"Sign Up",e&&o.a.createElement(b.a,{size:30})),o.a.createElement(E.a,{container:!0},o.a.createElement(E.a,{item:!0},o.a.createElement(w.a,{href:"/login",variant:"body2"},"Already have an account? Sign In")))))))}}]),a}(n.Component),j=a(32),L=a(103),I=a.n(L),x=a(229),W=a(101),M=a.n(W),N=a(221),P=a(222),A=a(220),D=a(102),z=a.n(D),B=a(219),F=a(223),T=a(225),V=a(224),q=a(81),U=a(21),R=a(36),G=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={markers:[{name:"Current position",position:{lat:13.0827,lng:80.2707}}]},e.onMarkerDragEnd=function(t,a){var n=t.latLng,o=n.lat(),i=n.lng();e.setState((function(t){var n=Object(U.a)(e.state.markers);return n[a]=Object(q.a)(Object(q.a)({},n[a]),{},{position:{lat:o,lng:i}}),{markers:n}})),e.props.handleLocation(o,i)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(R.Map,{google:this.props.google,style:{position:"fixed",width:"100%",height:"55%"},initialCenter:{lat:13.0827,lng:80.2707},zoom:10},this.state.markers.map((function(t,a){return o.a.createElement(R.Marker,{position:t.position,draggable:!0,onDragend:function(t,n,o){return e.onMarkerDragEnd(o,a)},name:t.name})})))}}]),a}(o.a.Component),H=Object(R.GoogleApiWrapper)({apiKey:"AIzaSyD5eTNNRzPBVuU5mGkfYFNPa46_P2qNVgo"})(G),K=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(m.a)(this,a),(n=t.call(this,e)).onMarkerClick=function(e,t,a){n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.onClose=function(e){n.state.showingInfoWindow&&n.setState({showingInfoWindow:!1,activeMarker:null})};var o=[],i=e.position?e.position:{lat:13.0827,lng:80.2707};return(o=e.location.map((function(e){return{name:e.title,position:{lat:e.lat,lng:e.lng}}}))).push({name:"Current position",position:{lat:13.0827,lng:80.2707}}),n.state={markers:o,showingInfoWindow:!0,activeMarker:{},selectedPlace:{},center:i},n}return Object(u.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.selectLocation;navigator.geolocation.getCurrentPosition((function(e){var n=e.coords;a.push({name:"Current position",position:{lat:n.latitude,lng:n.longitude}}),t.setState({markers:a}),t.calculateDistance(a)}))}},{key:"calculateDistance",value:function(e){var t=e[0].position.lat,a=e[1].position.lat,n=e[0].position.lng,o=e[1].position.lng;if(t===a&&n===o)return 0;var i=Math.PI*t/180,l=Math.PI*a/180,r=n-o,c=Math.PI*r/180,s=Math.sin(i)*Math.sin(l)+Math.cos(i)*Math.cos(l)*Math.cos(c);s>1&&(s=1),s=60*(s=180*(s=Math.acos(s))/Math.PI)*1.1515,s*=1.609344,alert("The distance to your favourite location is "+s+" Kms")}},{key:"render",value:function(){var e=this;return o.a.createElement(R.Map,{google:this.props.google,style:{width:"50%",height:"200%"},initialCenter:this.state.center,center:this.state.center,zoom:10},this.state.markers.map((function(t,a){return o.a.createElement(R.Marker,{key:a,position:t.position,draggable:!1,onClick:e.onMarkerClick,name:t.name})})),o.a.createElement(R.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onClose:this.onClose},o.a.createElement("div",null,o.a.createElement("h4",null,this.state.selectedPlace.name))))}}]),a}(o.a.Component),J=Object(R.GoogleApiWrapper)({apiKey:"AIzaSyD5eTNNRzPBVuU5mGkfYFNPa46_P2qNVgo"})(K),_=o.a.forwardRef((function(e,t){return o.a.createElement(B.a,Object.assign({direction:"up",ref:t},e))})),Y=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(s.a)({},e.target.name,e.target.value))},n.componentDidMount=function(){n.fetchDetail()},n.fetchDetail=function(){n.setState({uiLoading:!0});var e=S.a.database().ref("location/"+localStorage.getItem("uid")),t=[];e.on("value",(function(e){e.forEach((function(e){var a=e.val();t.push(a[0])})),n.setState({locations:t,uiLoading:!1})}))},n.state={locations:[],saveData:[],title:"",body:"",lat:"",long:"",locationId:"",selectedLocation:[],errors:[],position:{},open:!1,uiLoading:!0,viewOpen:!1},n.handleLocation=n.handleLocation.bind(Object(j.a)(n)),n.handleViewOpen=n.handleViewOpen.bind(Object(j.a)(n)),n}return Object(u.a)(a,[{key:"handleLocation",value:function(e,t){this.setState({lat:e,long:t})}},{key:"handleViewOpen",value:function(e){var t=[{name:e.location.title,position:{lat:e.location.lat,lng:e.location.lng}}],a={lat:e.location.lat,lng:e.location.lng};this.setState({selectedLocation:t,position:a,viewOpen:!0})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.open,n=function(t){e.setState({open:!1})};return!0===this.state.uiLoading?o.a.createElement("main",{className:t.content},o.a.createElement("div",{className:t.toolbar}),this.state.uiLoading&&o.a.createElement(b.a,{size:150})):o.a.createElement("div",null,o.a.createElement("main",{className:t.content,style:{maxWidth:"50%",display:"inline-block",float:"left"}},o.a.createElement("div",{className:t.toolbar}),o.a.createElement("div",null,this.state.open?o.a.createElement("div",null):o.a.createElement(A.a,{style:{zIndex:"9999999999"},className:t.floatingButton,color:"primary","aria-label":"Add Location",onClick:function(){e.setState({locationId:"",title:"",body:"",buttonType:"",open:!0})}},o.a.createElement(M.a,{style:{fontSize:100}}))),o.a.createElement(x.a,{fullScreen:!0,open:a,onClose:n,TransitionComponent:_},o.a.createElement(N.a,{style:{position:"relative"}},o.a.createElement(P.a,null,o.a.createElement(A.a,{edge:"start",color:"inherit",onClick:n,"aria-label":"close"},o.a.createElement(z.a,null)),o.a.createElement(f.a,{variant:"h6"},"Add favourite location"),o.a.createElement(y.a,{autoFocus:!0,color:"inherit",onClick:function(t){t.preventDefault();var a=localStorage.getItem("uid"),n=[{title:e.state.title,body:e.state.body,lat:e.state.lat,lng:e.state.long}];S.a.database().ref("location/"+a).push(n),alert("Location Saved Successfully"),e.setState({open:!1}),e.fetchDetail()},className:t.submitButton},"SAVE"))),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(E.a,{container:!0,spacing:2,style:{marginBottom:"20px"}},o.a.createElement(E.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"outlined",required:!0,fullWidth:!0,id:"locationTitle",label:"Location Name",name:"title",autoComplete:"locationTitle",value:this.state.title,onChange:this.handleChange})),o.a.createElement(E.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"outlined",required:!0,fullWidth:!0,id:"address",label:"Address",name:"body",autoComplete:"address",onChange:this.handleChange,value:this.state.body}))),o.a.createElement("div",{className:"test"},o.a.createElement(H,{handleLocation:this.handleLocation})))),o.a.createElement(E.a,{container:!0,spacing:2},this.state.locations.map((function(a){return o.a.createElement(E.a,{item:!0,xs:12,sm:6},o.a.createElement(F.a,{className:t.root,variant:"outlined",style:{minWidth:"100%"}},o.a.createElement(V.a,null,o.a.createElement(f.a,{variant:"h6",component:"h2"},a.title),o.a.createElement(f.a,{className:t.pos,color:"textSecondary"}),o.a.createElement(f.a,{variant:"body2",component:"p"},"Address:","".concat(a.body)),o.a.createElement(f.a,{variant:"body2",component:"p"},"Lat: ",a.lat),o.a.createElement(f.a,{variant:"body2",component:"p"},"Long: ",a.lng)),o.a.createElement(T.a,null,o.a.createElement(y.a,{size:"small",color:"primary",onClick:function(){return e.handleViewOpen({location:a})}}," ","View"," "))))})))),!this.state.open&&o.a.createElement("div",{className:"maps",style:{float:"left"}},this.state.viewOpen?o.a.createElement(J,{selectLocation:this.state.selectedLocation,location:this.state.locations,position:this.state.position}):o.a.createElement(J,{location:this.state.locations})))}}]),a}(n.Component),Q=I()((function(e){return{content:{flexGrow:1,padding:e.spacing(3)},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},submitButton:{display:"block",color:"white",textAlign:"center",position:"absolute",top:14,right:10},floatingButton:{position:"fixed",bottom:0,right:0},form:{width:"98%",marginLeft:13,marginTop:e.spacing(3)},toolbar:e.mixins.toolbar,root:{minWidth:470},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},pos:{marginBottom:12},dialogeStyle:{maxWidth:"50%"},viewRoot:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))(Y),X=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).logoutHandler=function(e){localStorage.removeItem("loggedIn"),n.props.history.push("/login")},n.componentDidMount=function(){"true"!==localStorage.getItem("loggedIn")&&n.logoutHandler()},n.state={uiLoading:!1},n}return Object(u.a)(a,[{key:"render",value:function(){return!0===this.state.uiLoading?o.a.createElement("div",null,this.state.uiLoading&&o.a.createElement(b.a,{size:150})):o.a.createElement("div",null,o.a.createElement(h.a,null),o.a.createElement(N.a,{position:"fixed"},o.a.createElement(P.a,null,o.a.createElement(f.a,{variant:"h6",noWrap:!0},"Favorite Location Tracker"),o.a.createElement(f.a,{variant:"h6",noWrap:!0,style:{border:"1px solid",padding:"0px 10px",marginLeft:"2%"},onClick:this.logoutHandler},"Logout"))),o.a.createElement(Q,null))}}]),a}(n.Component),$=a(226),Z=a(80),ee=a.n(Z)()({palette:{primary:{light:"#33c9dc",main:"#FF5722",dark:"#d50000",contrastText:"#fff"}}});var te=function(){return o.a.createElement($.a,{theme:ee},o.a.createElement(r.a,{basename:"/Favourite-Location-Tracker"},o.a.createElement("div",null,o.a.createElement(c.c,null,o.a.createElement(c.a,{exact:!0,path:"/",component:X}),o.a.createElement(c.a,{exact:!0,path:"/login",component:C}),o.a.createElement(c.a,{exact:!0,path:"/signup",component:O})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));k.initializeApp({apiKey:"AIzaSyBbCghBXCJMiaGFQS-jSh_3t0-FP-HRgq0",authDomain:"fav-location-tracker.firebaseapp.com",databaseURL:"https://fav-location-tracker.firebaseio.com",projectId:"fav-location-tracker",storageBucket:"fav-location-tracker.appspot.com",messagingSenderId:"153323060946",appId:"1:153323060946:web:d0d12b593c377c3148f70b"}),l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(te,{basename:"/Favourite-Location-Tracker"})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[118,1,2]]]);
//# sourceMappingURL=main.c8507ca8.chunk.js.map